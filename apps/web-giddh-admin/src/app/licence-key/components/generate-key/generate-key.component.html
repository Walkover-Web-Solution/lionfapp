<div class="clearfix">
    <div class="pageHeader">
        <div class="d-inline-flex">
            <h5 class="mb-0">Generate License Keys</h5>
        </div>
        <a href="javascript:;" [routerLink]="['/admin/licence-key']" class="pull-right btn btn-blue">License Keys</a>
    </div>

    <div class="page-content">
        <div class="page-number mt-3 mb-4">
            <div class="wrap-row">
                <p>Total issued Keys</p>
                <h4>{{licenseStatistics?.total}}</h4>
            </div>
            <div class="wrap-row">
                <p>Active keys</p>
                <h4>{{licenseStatistics?.active}}</h4>
            </div>
            <div class="wrap-row">
                <p>Expired Keys</p>
                <h4>{{licenseStatistics?.expired}}</h4>
            </div>
        </div>

        <div class="row">
            <form name="form" #generateKeysForm="ngForm" novalidate="" autocomplete="off">
                <div class="col-md-3">
                    <input type="number" (blur)="validateLicenseKeys()" placeholder="No. of keys" class="form-control" name="noOfKeys" [(ngModel)]="generateLicenseKeysRequest.noOfKeys" required>
                </div>
                <div class="col-md-3">
                    <div class="select-style">
                        <select [(ngModel)]="generateLicenseKeysRequest.planUniqueName" name="planUniqueName" required>
                            <option selected [value]="''">Select Plan</option>
                            <option *ngFor="let plan of allPlans" [value]="plan.uniqueName">{{plan.name}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <button type="button" class="btn-blue btn" [disabled]="generateKeysForm.invalid || isLoading" (click)="generateKeys()">Generate</button>
                </div>
            </form>    
        </div>

        <div class="selectAllList mt-5" *ngIf="generatedKeysAvailable">
            <div class="row">
                <div class="col-sm-4">
                    <label class="checkbox mr-3">
                        <input type="checkbox" [attr.checked]="selectAllActive" (change)="selectAllKeys($event)"> Select All
                    </label>

                    <button class="btn btn-blue mr-1" (click)="copyKeys()">Copy</button>
                    <button class="btn btn-danger" (click)="deleteKeys()">Delete</button>

                    <div class="key-list">
                        <span *ngFor="let key of generatedKeys;">
                            <label class="checkbox mr-3" *ngIf="!key.deleted">
                                <input type="checkbox" [attr.checked]="key.checked" (change)="selectLicenseKey(key)"> {{key.key}}
                            </label>
                        </span>    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>